___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "displayName": "Contentsquare - Main tag",
  "description": "Deploy the Contentsquare Main Tag and start collecting data!",
  "categories": [
    "ANALYTICS",
    "HEAT_MAP",
    "SESSION_RECORDING"
  ],
  "securityGroups": [],
  "id": "cvt_temp_public_id",
  "type": "TAG",
  "version": 1.2,
  "brand": {
    "thumbnail": "data:image/png;base64,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\u003d\u003d",
    "displayName": "contentsquare-ps",
    "id": "github.com_contentsquare-ps"
  },
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "help": "This is your unique Contentsquare ID",
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ],
    "displayName": "Tag ID",
    "simpleValueType": true,
    "name": "TagId",
    "type": "TEXT"
  },
  {
    "displayName": "Contentsquare Custom Variables",
    "name": "Label",
    "type": "LABEL"
  },
  {
    "displayName": "Define Custom Variables",
    "name": "cvars",
    "simpleTableColumns": [
      {
        "valueValidators": [
          {
            "args": [
              "([1-9]|[1-9][0-9])"
            ],
            "type": "REGEX"
          }
        ],
        "defaultValue": "",
        "displayName": "Slot",
        "name": "slot",
        "isUnique": true,
        "type": "TEXT",
        "valueHint": "Integer 1-20"
      },
      {
        "defaultValue": "",
        "displayName": "Name",
        "name": "name",
        "type": "TEXT"
      },
      {
        "macrosInSelect": true,
        "selectItems": [],
        "defaultValue": "",
        "displayName": "Value",
        "name": "value",
        "type": "SELECT"
      }
    ],
    "type": "SIMPLE_TABLE",
    "newRowButtonText": "Add custom variable"
  },
  {
    "displayName": "Mask Personally Identifiable Information (PII) in session replay",
    "name": "Label2",
    "type": "LABEL"
  },
  {
    "displayName": "Mask using CSS Selectors for text nodes (optional)",
    "name": "Label3",
    "type": "LABEL"
  },
  {
    "type": "TEXT",
    "name": "piiselectors",
    "displayName": "Define CSS Selectors",
    "simpleValueType": true,
    "canBeEmptyString": true,
    "valueHint": "#username,.details,#firstname"
  },
  {
    "displayName": "Mask using Attributes \u0026 Selectors for element data attributes (optional)",
    "name": "Label4",
    "type": "LABEL"
  },
  {
    "type": "SIMPLE_TABLE",
    "name": "attributeselectors",
    "displayName": "Define CSS Attribute Selectors",
    "simpleTableColumns": [
      {
        "defaultValue": "",
        "displayName": "CSS Selectors",
        "name": "selectors",
        "type": "TEXT",
        "valueHint": "#submit-button,.formfield",
        "isUnique": true,
        "valueValidators": [
          {
            "type": "NON_EMPTY"
          }
        ]
      },
      {
        "defaultValue": "",
        "displayName": "Data Attributes",
        "name": "attributes",
        "type": "TEXT",
        "valueHint": "data-email,data-firstname",
        "valueValidators": [
          {
            "type": "NON_EMPTY"
          }
        ]
      }
    ],
    "newRowButtonText": "Add New Attribute Selector"
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

//const logToConsole = require("logToConsole");
const copyFromWindow = require("copyFromWindow");
const injectScript = require("injectScript");
const getUrl = require("getUrl");
const getQueryParameters = require("getQueryParameters");
const encodeUriComponent = require("encodeUriComponent");
const createQueue = require("createQueue");

let _uxaPush = createQueue("_uxa");
let CS_CONF = copyFromWindow("CS_CONF");
let windowPath = getUrl("path");
let windowHash = getUrl("fragment");

let scriptURL = "https://t.contentsquare.net/uxa/" + encodeUriComponent(data.TagId) + ".js";

let utm_medium = getQueryParameters("utm_medium");
let utm_source = getQueryParameters("utm_source");
let utm_campaign = getQueryParameters("utm_campaign");
let gclid = getQueryParameters("gclid");

if (utm_medium !== "" && typeof utm_medium !== "undefined") {
    _uxaPush(["trackDynamicVariable", { key: "Medium", value: utm_medium.toLowerCase() }]);
}
if (utm_source !== "" && typeof utm_source !== "undefined") {
    _uxaPush(["trackDynamicVariable", { key: "Source", value: utm_source.toLowerCase() }]);
}
if (utm_campaign !== "" && typeof utm_campaign !== "undefined") {
    _uxaPush(["trackDynamicVariable", { key: "Campaign", value: utm_campaign.toLowerCase() }]);
}
if (gclid !== "" && typeof gclid !== "undefined") {
    _uxaPush(["trackDynamicVariable", { key: "Gclid", value: "true" }]);
}
if (data.hasOwnProperty("cvars")) {
    for (var i = 0; i < data.cvars.length; i++) {
        _uxaPush(["setCustomVariable", data.cvars[i].slot, data.cvars[i].name, data.cvars[i].value, 3]);
    }
}

var usePIIapi = false;
var piiObject = {};

if (data.piiselectors) {
    piiObject.PIISelectors = [data.piiselectors];
    if (piiObject.PIISelectors) {
        usePIIapi = true;
    }
}

if (data.attributeselectors) {
    piiObject.Attributes = [];
    for (var i = 0; i < data.attributeselectors.length; i++) {
        piiObject.Attributes.push({
            selector: data.attributeselectors[i].selectors,
            attrName: data.attributeselectors[i].attributes,
        });
    }

    if (piiObject.Attributes.length) {
        usePIIapi = true;
    }
}

if (usePIIapi) {
    _uxaPush(["setPIISelectors", piiObject]);
}

if (typeof CS_CONF === "undefined") {
    if (windowHash !== "") {
        _uxaPush(["setPath", windowPath + "?__" + windowHash]);
    }
    injectScript(scriptURL, data.gtmOnSuccess, data.gtmOnFailure);
} else {
    var trackPVurl = windowPath;

    if (windowHash !== "") {
        trackPVurl = windowPath + "?__" + windowHash;
    }

    _uxaPush(["trackPageview", trackPVurl]);
    data.gtmOnSuccess();
}


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "access_globals",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keys",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "_uxa"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "CS_CONF"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "inject_script",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://t.contentsquare.net/*"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "get_url",
        "versionId": "1"
      },
      "param": [
        {
          "key": "queriesAllowed",
          "value": {
            "type": 1,
            "string": "specific"
          }
        },
        {
          "key": "urlParts",
          "value": {
            "type": 1,
            "string": "specific"
          }
        },
        {
          "key": "path",
          "value": {
            "type": 8,
            "boolean": true
          }
        },
        {
          "key": "fragment",
          "value": {
            "type": 8,
            "boolean": true
          }
        },
        {
          "key": "queryKeys",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "utm_medium"
              },
              {
                "type": 1,
                "string": "utm_source"
              },
              {
                "type": 1,
                "string": "utm_campaign"
              },
              {
                "type": 1,
                "string": "gclid"
              }
            ]
          }
        },
        {
          "key": "query",
          "value": {
            "type": 8,
            "boolean": true
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios: []


___NOTES___

Created on 1/19/2022, 01:07:31 PM
Added missing data.gtmOnSuccess callback to the else condition for SPA scenarios. Without it the "Still Running" issue occurs in the GTM debugger.


